<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XV A침os - Itzel Estefan칤a</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Great+Vibes&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* Verde ajustado al vestido (Mint/Sage m치s vibrante y elegante) */
            --primary-sage: #9ec5ab; 
            --dark-sage: #7a9e89;
            --light-sage: #f2f7f4;
            --gold: #d4af37;
            --gold-light: #f3e5ab;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--light-sage);
            overflow-x: hidden;
            background-image: radial-gradient(rgba(158, 197, 171, 0.25) 0.5px, transparent 0.5px);
            background-size: 20px 20px;
        }

        .font-title { font-family: 'Great Vibes', cursive; }
        .font-serif { font-family: 'Cinzel', serif; }

        /* --- EFECTO ACUARELA (AJUSTADO: M치s peque침os, m치s cantidad) --- */
        .splash {
            position: absolute;
            z-index: 1; 
            border-radius: 50%;
            filter: blur(50px); /* Un poco menos de blur para que se noten los shapes peque침os */
            opacity: 0.5;
            pointer-events: none;
            animation: breathe 8s ease-in-out infinite;
        }

        .splash-1 {
            width: 180px; height: 180px;
            background: var(--primary-sage);
            top: 5%; right: -5%;
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
        }
        .splash-2 {
            width: 220px; height: 220px;
            background: var(--dark-sage);
            top: 22%; left: -8%;
            border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
            opacity: 0.35;
        }
        .splash-3 {
            width: 150px; height: 150px;
            background: var(--gold-light);
            top: 45%; right: 5%;
            border-radius: 50% 50% 20% 80% / 25% 80% 20% 75%;
            mix-blend-mode: multiply;
        }
        .splash-4 {
            width: 200px; height: 200px;
            background: var(--primary-sage);
            bottom: 25%; left: -5%;
            border-radius: 40% 60% 70% 30% / 40% 50% 60% 50%;
            opacity: 0.4;
        }
        .splash-5 {
            width: 160px; height: 160px;
            background: var(--gold);
            bottom: 5%; right: 10%;
            border-radius: 70% 30% 50% 50% / 60% 40% 60% 40%;
            opacity: 0.2;
            filter: blur(60px);
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* --- EFECTO DESTELLOS (SPARKLE) PARA CORONA --- */
        .sparkle-container {
            position: relative;
            display: inline-block;
        }
        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background-color: #ffd700; /* Oro brillante */
            border-radius: 50%;
            opacity: 0;
            box-shadow: 0 0 4px 1px rgba(255, 215, 0, 0.8);
            animation: twinkle 2s infinite ease-in-out;
            pointer-events: none;
        }
        /* Forma de cruz suave para el destello */
        .sparkle::after, .sparkle::before {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            background-color: #ffd700;
            transform: translate(-50%, -50%);
            border-radius: 50%;
        }
        .sparkle::before { width: 1px; height: 10px; }
        .sparkle::after { width: 10px; height: 1px; }

        @keyframes twinkle {
            0% { opacity: 0; transform: scale(0.5) rotate(0deg); }
            50% { opacity: 1; transform: scale(1.2) rotate(45deg); }
            100% { opacity: 0; transform: scale(0.5) rotate(90deg); }
        }

        /* --- ANIMACI칍N DE ENTRADA (GATE) --- */
        #gate-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 50;
            display: flex;
            pointer-events: auto; 
        }

        #gate-overlay.gate-open {
            pointer-events: none;
        }

        .gate-panel {
            width: 50%;
            height: 100%;
            background-color: var(--primary-sage);
            position: relative;
            transition: transform 2.5s cubic-bezier(0.4, 0, 0.2, 1);
            border-right: 2px solid var(--gold);
            background-image: 
                linear-gradient(90deg, transparent 45%, var(--gold) 45%, var(--gold) 55%, transparent 55%),
                linear-gradient(transparent 20%, var(--gold) 20%, var(--gold) 21%, transparent 21%);
            background-size: 60px 100%, 100% 120px;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.15);
        }

        .gate-left { transform-origin: left; border-right: 4px solid var(--gold); }
        .gate-right { transform-origin: right; border-left: 4px solid var(--gold); background-position: right; }

        .gate-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 60;
            text-align: center;
            width: 90%;
            max-width: 400px;
            background: rgba(255, 255, 255, 0.95);
            padding: 2.5rem;
            border-radius: 1rem;
            border: 2px solid var(--gold);
            box-shadow: 0 15px 35px rgba(0,0,0,0.25);
            transition: opacity 1s ease;
        }

        /* --- CONTENEDOR DE LA MARIPOSA --- */
        .butterfly-wrapper {
            position: absolute;
            top: 28%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 65;
            width: 150px; 
            height: 150px;
            pointer-events: none;
            animation: float 3s ease-in-out infinite;
            transition: all 2s ease-in-out;
        }

        .butterfly-static {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0px 8px 10px rgba(0,0,0,0.3));
        }

        .butterfly-sprite {
            width: 150px;
            height: 150px;
            background-repeat: no-repeat;
            display: none;
            filter: drop-shadow(0px 8px 10px rgba(0,0,0,0.3));
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }

        .gate-open .gate-left { transform: translateX(-100%); }
        .gate-open .gate-right { transform: translateX(100%); }
        .gate-open .gate-content { opacity: 0; pointer-events: none; }
        
        .gate-open .butterfly-wrapper { 
            animation: flyAway 2.5s forwards; 
        }

        @keyframes float {
            0%, 100% { transform: translate(-50%, -50%) translateY(0) scale(1); }
            50% { transform: translate(-50%, -50%) translateY(-12px) scale(1.05); }
        }
        
        @keyframes flyAway {
            0% { top: 28%; left: 50%; transform: translate(-50%, -50%) scale(1); opacity: 1; }
            15% { transform: translate(-50%, -50%) scale(1.1) rotate(-10deg); } 
            100% { top: -20%; left: 80%; transform: translate(-50%, -50%) scale(0.6) rotate(45deg); opacity: 0; }
        }

        /* --- CONTENIDO PRINCIPAL --- */
        .main-card {
            background: white;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            border: 1px solid var(--gold);
            opacity: 0;
            transition: opacity 2s ease 1s;
            position: relative;
            overflow: hidden; 
        }

        .show-content { opacity: 1; }

        .btn-gold {
            background: linear-gradient(45deg, var(--gold), #e6c86e);
            color: white;
            transition: transform 0.3s, box-shadow 0.3s;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            position: relative;
            z-index: 30;
            cursor: pointer;
        }
        .btn-gold:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4);
        }
        
        .main-card a,
        .main-card button {
            position: relative;
            z-index: 30;
            cursor: pointer;
        }
        
        .main-card > .absolute.border {
            pointer-events: none !important;
        }

        /* Scroll Reveal */
        .reveal-section {
            opacity: 0;
            transform: translateY(40px);
            transition: all 1s ease-out;
        }
        .reveal-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- MARIPOSAS AMBIENTALES --- */
        .ambient-butterfly {
            position: absolute;
            background-repeat: no-repeat;
            pointer-events: none;
            opacity: 0;
            z-index: 20;
            filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2));
        }

        @keyframes ambientFly {
            0% { transform: translate(0, 0) scale(0.5) rotate(0deg); opacity: 0; }
            20% { opacity: 1; }
            80% { opacity: 1; }
            100% { transform: translate(120px, -250px) scale(0.8) rotate(25deg); opacity: 0; }
        }

        /* --- FLORES IM츼GENES (FIXED VISIBILITY) --- */
        .floral-corner {
            position: absolute;
            width: 250px; 
            height: auto;
            pointer-events: none;
            /* Subimos el Z-Index para que est칠n sobre el contenido (20) y no se vean borrosas */
            z-index: 25; 
            opacity: 0.95;
            filter: sepia(0.1) saturate(0.9); 
        }
        .floral-top-left { top: -40px; left: -40px; transform: rotate(0deg); }
        .floral-top-right { top: -40px; right: -40px; transform: scaleX(-1); }
        .floral-bottom-left { bottom: -40px; left: -40px; transform: scaleY(-1); }
        .floral-bottom-right { bottom: -40px; right: -40px; transform: rotate(180deg); }

        /* Bot칩n M칰sica */
        .music-control {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: white;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 40;
            cursor: pointer;
            border: 2px solid var(--gold);
        }
        .spin { animation: spin 5s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }

  /* --- FOTO DE LA QUINCEA칌ERA --- */
.quince-photo-container {
    position: relative;
    width: 280px;      /* Width for portrait orientation */
    height: 420px;     /* Height maintains aspect ratio */
    margin: 2rem auto;
    z-index: 25;
}

.quince-photo-frame {
    width: 100%;
    height: 100%;
    border-radius: 12px;  /* Changed from 50% to rounded rectangle */
    overflow: hidden;
    border: 4px solid var(--gold);
    box-shadow: 
        0 0 0 8px white,
        0 0 0 10px var(--primary-sage),
        0 15px 35px rgba(0,0,0,0.2);
    position: relative;
    background: white;
}

.quince-photo-frame::before {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 12px;  /* Match the rounded rectangle */
    padding: 4px;
    background: linear-gradient(135deg, var(--gold), var(--primary-sage), var(--gold));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0.6;
}

.quince-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
}

/* Destellos decorativos alrededor de la foto */
.photo-sparkle {
    position: absolute;
    width: 8px;
    height: 8px;
    background: var(--gold);
    border-radius: 50%;
    box-shadow: 0 0 10px var(--gold);
    animation: photoSparkle 3s ease-in-out infinite;
}

.photo-sparkle:nth-child(1) { top: 10%; right: 10%; animation-delay: 0s; }
.photo-sparkle:nth-child(2) { top: 30%; right: -5%; animation-delay: 1s; }
.photo-sparkle:nth-child(3) { bottom: 20%; right: 5%; animation-delay: 2s; }
.photo-sparkle:nth-child(4) { bottom: 10%; left: 10%; animation-delay: 1.5s; }
.photo-sparkle:nth-child(5) { top: 20%; left: -5%; animation-delay: 0.5s; }

@keyframes photoSparkle {
    0%, 100% { opacity: 0; transform: scale(0); }
    50% { opacity: 1; transform: scale(1); }
}

/* --- FOTOS DIVISORAS ENTRE SECCIONES --- */
.section-divider-photo {
    position: relative;
    z-index: 20;
    padding: 3rem 2rem;
    display: flex;
    justify-content: center;
    align-items: center;
}

.divider-photo-container {
    position: relative;
    width: 200px;
    height: 300px;
    margin: 0 auto;
}

.divider-photo-frame {
    width: 100%;
    height: 100%;
    border-radius: 8px;
    overflow: hidden;
    border: 3px solid var(--gold);
    box-shadow: 
        0 0 0 6px white,
        0 0 0 8px var(--primary-sage),
        0 12px 30px rgba(0,0,0,0.2);
    position: relative;
    background: white;
    transform: rotate(-2deg);
    transition: transform 0.5s ease;
}

.divider-photo-frame:hover {
    transform: rotate(0deg) scale(1.05);
}

.divider-photo-frame.rotate-right {
    transform: rotate(2deg);
}

.divider-photo-frame.rotate-right:hover {
    transform: rotate(0deg) scale(1.05);
}

.divider-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
}

/* Decoraci칩n alrededor de foto divisora */
.divider-photo-decoration {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 280px;
    height: 380px;
    border: 1px dashed var(--gold);
    opacity: 0.3;
    border-radius: 12px;
    pointer-events: none;
}

    </style>
</head>
<body class="antialiased text-gray-700">

    <!-- AUDIO PLAYER -->
    <audio id="bg-music" loop>
        <source src="bgmusic.mp3" type="audio/mpeg">
    </audio>

    <div id="music-btn" class="music-control hidden" onclick="toggleMusic()">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#d4af37]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" />
        </svg>
    </div>

    <!-- PANTALLA DE BLOQUEO (REJA) -->
    <div id="gate-overlay">
        <div class="gate-panel gate-left"></div>
        <div class="gate-panel gate-right"></div>

        <!-- CONTENEDOR MARIPOSA PRINCIPAL -->
        <div class="butterfly-wrapper">
            <img id="static-butterfly" src="https://placehold.co/150x150/transparent/transparent?text=Butterfly" class="butterfly-static" alt="Mariposa" onerror="this.src='https://placehold.co/150x150/transparent/transparent?text=Butterfly'">
            <div id="main-butterfly" class="butterfly-sprite"></div>
        </div>

        <div class="gate-content">
            <h2 class="font-serif text-2xl text-[#7a9e89] mb-2 uppercase tracking-widest">Bienvenido</h2>
            <p class="text-sm text-gray-500 mb-6">Por favor, escribe tu nombre para abrir la invitaci칩n</p>
            <form id="entry-form" onsubmit="openInvitation(event)">
                <input type="text" id="guest-name" required placeholder="Tu nombre aqu칤..." 
                    class="w-full px-4 py-3 border-b-2 border-[#d4af37] bg-gray-50 focus:outline-none focus:bg-white text-center font-serif text-lg mb-6 transition-colors">
                <button type="submit" 
                    class="btn-gold px-8 py-3 rounded-full font-bold uppercase tracking-widest text-sm w-full shadow-lg">
                    Abrir Invitaci칩n
                </button>
            </form>
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL -->
    <div id="main-content" class="min-h-screen py-10 px-4 md:px-0 flex justify-center items-center">
        <div class="main-card max-w-xl w-full rounded-xl bg-white relative">
            
            <!-- ELEMENTOS DECORATIVOS FONDO (Nuevo: Acuarela m치s peque침os y cantidad) -->
            <div class="splash splash-1"></div>
            <div class="splash splash-2"></div>
            <div class="splash splash-3"></div>
            <div class="splash splash-4"></div>
            <div class="splash splash-5"></div>

            <!-- Flores Decorativas (Ahora z-index 25) -->
            <img src="floraltopleft.png" 
                 class="floral-corner floral-top-left" alt="Flores Decorativas">
            
            <img src="floraltopleft.png" 
                 class="floral-corner floral-bottom-right" alt="Flores Decorativas">

            <!-- Marco Dorado Interno -->
            <div class="absolute inset-5 border border-[#d4af37] opacity-60 rounded-lg pointer-events-none z-10" style="pointer-events: none !important;"></div>

            <!-- Header Section -->
            <div class="reveal-section text-center pt-28 pb-16 px-8 relative z-20">
                <!-- Corona Personalizada CON DESTELLOS -->
                <div class="mx-auto mb-6 relative w-max sparkle-container">
                    <img src="crown.png" alt="Corona XV" class="w-20 h-auto mx-auto opacity-90 drop-shadow-sm" 
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <!-- Fallback SVG -->
                    <svg style="display:none;" class="w-20 h-20 mx-auto text-[#d4af37]" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5ZM19 19C19 19.5523 18.5523 20 18 20H6C5.44772 20 5 19.5523 5 19V18H19V19Z" />
                    </svg>

                    <!-- Destellos program치ticos -->
                    <div class="sparkle" style="top: -5%; left: 10%; animation-delay: 0s;"></div>
                    <div class="sparkle" style="top: 15%; right: -5%; animation-delay: 1.2s;"></div>
                    <div class="sparkle" style="bottom: 10%; left: -5%; animation-delay: 0.6s;"></div>
                </div>

                <p class="text-[#7a9e89] uppercase tracking-[0.3em] text-xs font-bold mb-6">Est치s invitado a mis</p>
                <h1 class="font-title text-7xl text-[#7a9e89] mb-4 drop-shadow-sm">XV A침os</h1>
                
                <div class="flex justify-center items-center gap-4 my-8 opacity-60">
                    <div class="h-[1px] w-12 bg-[#d4af37]"></div>
                    <div class="w-2 h-2 rotate-45 bg-[#d4af37]"></div>
                    <div class="h-[1px] w-12 bg-[#d4af37]"></div>
                </div>
                
                <h2 class="font-serif text-4xl md:text-5xl text-gray-800 leading-tight mb-4 text-[#d4af37]">
                    Itzel Estefan칤a<br>
                    <span class="text-2xl text-gray-500 font-light mt-2 block">Dom칤nguez Pe침a</span>
                </h2>

                <!-- Foto de la Quincea침era -->
<div class="quince-photo-container">
    <div class="quince-photo-frame">
        <img src="itzel-photo.jpeg" alt="Itzel Estefan칤a" class="quince-photo"
             onerror="this.src='https://placehold.co/200x200/9ec5ab/ffffff?text=Itzel'">
    </div>
    <!-- Destellos decorativos -->
    <div class="photo-sparkle"></div>
    <div class="photo-sparkle"></div>
    <div class="photo-sparkle"></div>
    <div class="photo-sparkle"></div>
    <div class="photo-sparkle"></div>
</div>

                <p id="greeting-text" class="text-[#7a9e89] italic mt-6 text-sm font-medium"></p>
            </div>

            <!-- Quote Section -->
            <div class="reveal-section px-12 py-12 text-center text-gray-600 text-sm leading-loose bg-[#f9fbf9]/80 border-y border-[#d4af37] border-opacity-30 relative z-20 backdrop-blur-sm">
                <span class="text-4xl text-[#d4af37] font-serif leading-none block mb-2">"</span>
                Hay momentos en la vida que son especiales por s칤 solos, pero compartirlos con las personas que m치s quiero los convierte en momentos inolvidables.
                <span class="text-4xl text-[#d4af37] font-serif leading-none block mt-2">"</span>
            </div>
          
             <!-- Padres y Padrinos Section -->
            <div class="reveal-section py-16 px-8 text-center relative z-20">
                <div class="mb-12">
                    <h3 class="font-serif text-[#d4af37] text-xl font-bold mb-4 tracking-widest uppercase text-xs">Con la bendici칩n de mis padres</h3>
                    <div class="space-y-2">
                        <p class="font-serif text-lg text-gray-700">Citlali Pe침a Barradas</p>
                        <p class="text-[#d4af37] font-title text-xl">&</p>
                        <p class="font-serif text-lg text-gray-700">Alberto Dom칤nguez Garc칤a</p>
                    </div>
                </div>
                
                <div>
                    <h3 class="font-serif text-[#d4af37] text-xl font-bold mb-4 tracking-widest uppercase text-xs">Y mis padrinos de honor</h3>
                    <div class="space-y-2">
                        <p class="font-serif text-lg text-gray-700">Berenice P칠rez Mu침oz</p>
                        <p class="text-[#d4af37] font-title text-xl">&</p>
                        <p class="font-serif text-lg text-gray-700">Gilberto Hern치ndez Hern치ndez</p>
                    </div>
                </div>
            </div>

            <!-- Fecha Section -->
            <div class="reveal-section text-center py-20 bg-[#9ec5ab] text-white relative overflow-hidden z-20">
                <div class="absolute inset-0 opacity-10" style="background-image: radial-gradient(#fff 1px, transparent 1px); background-size: 20px 20px;"></div>
                
                <div class="relative z-10 border-2 border-[#d4af37] inline-block p-8 bg-white/10 backdrop-blur-sm rounded-lg shadow-lg">
                    <p class="text-2xl uppercase tracking-[0.2em] mb-2 font-light">Enero</p>
                    <p class="text-8xl font-serif font-bold text-white mb-2" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.1);">17</p>
                    <p class="text-2xl uppercase tracking-[0.2em] mt-2 font-light">2026</p>
                </div>
            </div>
              <!-- Foto Divisora 1 -->
<div class="reveal-section section-divider-photo">
    <div class="divider-photo-container">
        <div class="divider-photo-decoration"></div>
        <div class="divider-photo-frame">
            <img src="itzel-photo1.jpg" alt="Itzel" class="divider-photo"
                 onerror="this.src='https://placehold.co/200x300/9ec5ab/ffffff?text=Foto+2'">
        </div>
    </div>
</div>

            <!-- Timeline / Ubicaciones Section -->
            <div class="py-16 px-8 space-y-16 relative z-20">
                <!-- Iglesia -->
                <div class="reveal-section text-center">
                    <div class="w-16 h-16 mx-auto mb-6 rounded-full bg-[#f9fbf9] flex items-center justify-center border border-[#d4af37]">
                        <svg class="w-8 h-8 text-[#d4af37]" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L6 20h12L12 2zm0 3.5l3.5 10.5h-7L12 5.5zM12 22a2 2 0 100-4 2 2 0 000 4z"/></svg>
                    </div>
                    <h3 class="font-serif text-2xl font-bold text-[#7a9e89] mb-2">Ceremonia Religiosa</h3>
                    <div class="w-20 h-1 bg-[#d4af37] mx-auto mb-4"></div>
                    <p class="text-[#d4af37] font-bold text-xl mb-2">4:00 PM</p>
                    <p class="text-gray-600 text-lg">Parroquia San Isidro Labrador</p>
                    <p class="text-gray-400 text-sm mb-6">Los Mangos, 95207, Ver.</p>
                    <a href="https://maps.app.goo.gl/JyiQU8Vkk2R1gZiE7" target="_blank" 
                       class="inline-block px-8 py-3 border border-[#d4af37] text-[#d4af37] rounded-full text-xs font-bold uppercase tracking-wider hover:bg-[#d4af37] hover:text-white transition-colors relative z-30 cursor-pointer">
                        Ver Mapa
                    </a>
                </div>

                <!-- Recepci칩n -->
                <div class="reveal-section text-center">
                    <div class="w-16 h-16 mx-auto mb-6 rounded-full bg-[#f9fbf9] flex items-center justify-center border border-[#d4af37]">
                         <svg class="w-8 h-8 text-[#d4af37]" viewBox="0 0 24 24" fill="currentColor"><path d="M5 2h14v6c0 3.5-2.5 6.5-6 7v4h4v2H7v-2h4v-4c-3.5-.5-6-3.5-6-7V2zm2 2v4c0 2.5 2 4.5 5 4.5s5-2 5-4.5V4H7z"/></svg>
                    </div>
                    <h3 class="font-serif text-2xl font-bold text-[#7a9e89] mb-2">Recepci칩n</h3>
                    <div class="w-20 h-1 bg-[#d4af37] mx-auto mb-4"></div>
                    <p class="text-[#d4af37] font-bold text-xl mb-2">5:00 PM</p>
                    <p class="text-gray-600 text-lg">Los Mangos, Ver</p>
                    <p class="text-gray-400 text-sm mb-6">Benito Ju치rez, 95207 Los Mangos, Ver.</p>
                    <a href="https://maps.app.goo.gl/zcdViaTvpZjbDEWN8" target="_blank" 
                       class="inline-block px-8 py-3 border border-[#d4af37] text-[#d4af37] rounded-full text-xs font-bold uppercase tracking-wider hover:bg-[#d4af37] hover:text-white transition-colors relative z-30 cursor-pointer">
                        Ver Mapa
                    </a>
                </div>
            </div>

            <!-- C칩digo de Vestimenta Section -->
            <div class="reveal-section bg-[#fcfbf7]/90 py-16 px-6 text-center border-t border-b border-[#e8ece9] relative z-20 backdrop-blur-sm">
                <div class="mx-auto w-12 h-12 mb-4 text-[#7a9e89]">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 3L4 9v12h16V9l-8-6z" stroke-linejoin="round"/></svg>
                </div>
                <h3 class="font-serif text-xl font-bold text-[#d4af37] mb-2">C칩digo de Vestimenta</h3>
                <p class="text-gray-800 font-bold uppercase tracking-widest text-lg mb-6">Formal</p>
                <div class="max-w-xs mx-auto p-4 bg-white border border-red-100 rounded-lg shadow-sm">
                    <p class="text-sm text-gray-600 mb-2">Por favor, ay칰danos a hacer esta noche especial:</p>
                    <p class="text-xs text-red-400 font-bold uppercase flex items-center gap-2 justify-center">
                        <span class="text-lg">游뛂</span> Evitar colores Rosa y Verde
                    </p>
                </div>
            </div>

            <!-- Mesa de Regalos / Confirmaci칩n Section -->
<div class="reveal-section py-20 px-8 text-center bg-gradient-to-t from-[#f2f7f4] to-transparent relative z-20">
    <div class="absolute top-0 left-0 w-full h-full overflow-hidden opacity-30 pointer-events-none">
         <div class="absolute top-10 right-10 w-40 h-40 bg-[#d4af37] rounded-full blur-[80px]"></div>
         <div class="absolute bottom-10 left-10 w-40 h-40 bg-[#9ec5ab] rounded-full blur-[80px]"></div>
    </div>

    <div class="relative z-10">
        <!-- Lluvia de Sobres Section -->
        <div class="mb-16">
            <div class="w-16 h-16 mx-auto mb-6 rounded-full bg-[#f9fbf9] flex items-center justify-center border border-[#d4af37]">
                <svg class="w-8 h-8 text-[#d4af37]" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                </svg>
            </div>
            <h3 class="font-title text-5xl text-[#7a9e89] mb-6">Mesa de Regalos</h3>
            <p class="text-gray-600 mb-6 text-md leading-relaxed max-w-md mx-auto">
                Tu presencia es el mejor regalo, pero si deseas tener un detalle conmigo, habr치 lluvia de sobres.
            </p>
            <div class="inline-block px-6 py-3 bg-white border-2 border-[#d4af37] rounded-lg shadow-md">
                <p class="text-[#7a9e89] font-serif text-sm uppercase tracking-wider mb-1">Lluvia de Sobres</p>
                <p class="text-gray-500 text-xs">Durante la recepci칩n</p>
            </div>
        </div>
        <!-- Foto Divisora 2 -->
<div class="reveal-section section-divider-photo">
    <div class="divider-photo-container">
        <div class="divider-photo-decoration"></div>
        <div class="divider-photo-frame rotate-right">
            <img src="itzel-photo3.jpg" alt="Itzel" class="divider-photo"
                 onerror="this.src='https://placehold.co/200x300/9ec5ab/ffffff?text=Foto+3'">
        </div>
    </div>
</div>

        <!-- Divider -->
        <div class="w-16 h-1 bg-[#d4af37] mx-auto mb-12 rounded-full"></div>

        <!-- Confirmaci칩n -->
        <div>
            <h3 class="font-title text-5xl text-[#7a9e89] mb-8">Confirmaci칩n</h3>
            <p class="text-gray-600 mb-10 text-md leading-relaxed">
                Por favor confirma tu asistencia.
            </p>
            
            <a href="https://wa.me/5212294651656?text=Hola,%20confirmo%20mi%20asistencia%20a%20los%20XV%20de%20Itzel" target="_blank"
               class="btn-gold block w-full md:w-2/3 mx-auto py-5 rounded-lg font-bold uppercase tracking-[0.2em] shadow-xl mb-12 hover:scale-105 transition-transform relative z-30 cursor-pointer">
                Confirmar por WhatsApp
            </a>

            <div class="w-16 h-1 bg-gray-200 mx-auto mb-8 rounded-full"></div>
            <p class="text-xs text-gray-400 font-serif tracking-widest">XV A침os Itzel Estefan칤a &copy; 2026</p>
        </div>
    </div>
</div>
    </div>

    <!-- Script para Animaciones y Funcionalidad -->
    <script>
        // ==========================================
        // CONFIGURACI칍N DE ARCHIVOS
        // ==========================================
        
        // 1. Imagen est치tica inicial (PNG normal)
        const STATIC_IMAGE_URL = "butterfly.png";

        // 2. Sprite Sheet (PNG con todos los frames)
        const SPRITE_SHEET_URL = "butterfly1.png";

        // 3. Archivo JSON de coordenadas
        const JSON_FILE_URL = "butterfly1.json"; 

        // Configuraci칩n de velocidad de animaci칩n
        const SPRITE_CONFIG = {
            speed: 80 // Milisegundos por cuadro (ajustado para mejor visualizaci칩n)
        };

        // ==========================================
        // L칍GICA DE CARGA Y ANIMACI칍N
        // ==========================================

        let spriteFramesData = []; // Array procesado de frames

        // Funci칩n para cargar y procesar el JSON externo
        async function loadSpriteData() {
            try {
                // Mocking data if fetch fails (for preview purposes)
                try {
                    const response = await fetch(JSON_FILE_URL);
                    if (!response.ok) throw new Error('No se pudo cargar el JSON');
                    const data = await response.json();
                    
                    spriteFramesData = Object.keys(data.frames)
                        .sort()
                        .map(key => data.frames[key].frame);
                    
                    if (data.meta && data.meta.size) {
                        SPRITE_CONFIG.sheetWidth = data.meta.size.w;
                        SPRITE_CONFIG.sheetHeight = data.meta.size.h;
                    }
                } catch(e) {
                    console.log("Using fallback sprite data");
                    // Minimal fallback data to prevent crashing if files are missing in preview
                    spriteFramesData = [{x:0, y:0, w:150, h:150}]; 
                }
                
            } catch (error) {
                console.error("Error cargando JSON de sprite:", error);
                spriteFramesData = [];
            }
        }

        class ButterflySprite {
            constructor(element, isAmbient = false) {
                this.element = element;
                this.currentFrame = 0;
                this.lastUpdate = 0;
                this.isAmbient = isAmbient;
                this.frames = spriteFramesData;

                this.element.style.backgroundImage = `url('${SPRITE_SHEET_URL}')`;
                this.element.style.backgroundRepeat = 'no-repeat';

                if (this.frames.length > 0) {
                    const firstFrame = this.frames[0];
                    if (SPRITE_CONFIG.sheetWidth && SPRITE_CONFIG.sheetHeight) {
                        const targetSize = isAmbient ? (parseInt(this.element.style.width) || 40) : 150;
                        const scale = targetSize / firstFrame.w;
                        this.scale = scale;
                        const scaledWidth = SPRITE_CONFIG.sheetWidth * scale;
                        const scaledHeight = SPRITE_CONFIG.sheetHeight * scale;
                        this.element.style.backgroundSize = `${scaledWidth}px ${scaledHeight}px`;
                    }
                    this.updateFrame(0);
                }

                this.animating = isAmbient;
                if (this.animating) this.startAnimation();
            }

            updateFrame(index) {
                const frame = this.frames[index];
                if (!frame) return;

                const x = (frame.x !== undefined) ? frame.x : (frame.frame && frame.frame.x) || 0;
                const y = (frame.y !== undefined) ? frame.y : (frame.frame && frame.frame.y) || 0;

                if (this.scale) {
                    this.element.style.backgroundPosition = `-${Math.round(x * this.scale)}px -${Math.round(y * this.scale)}px`;
                } else {
                    this.element.style.backgroundPosition = `-${x}px -${y}px`;
                }

                if (!this.isAmbient) {
                    this.element.style.width = '150px';
                    this.element.style.height = '150px';
                }
            }

            startAnimation() {
                if (this.frames.length === 0) return;
                this.animating = true;
                this.animate();
            }

            animate(timestamp) {
                if (!this.animating) return;

                if (timestamp - this.lastUpdate > SPRITE_CONFIG.speed) {
                    this.currentFrame = (this.currentFrame + 1) % this.frames.length;
                    this.updateFrame(this.currentFrame);
                    this.lastUpdate = timestamp;
                }
                requestAnimationFrame((t) => this.animate(t));
            }
        }

        let mainButterflySprite;

        window.addEventListener('load', async () => {
            await loadSpriteData();
            const mainEl = document.getElementById('main-butterfly');
            mainButterflySprite = new ButterflySprite(mainEl, false);
            
            // Handle static image logic if file exists
            const staticImg = document.getElementById('static-butterfly');
            if(staticImg) staticImg.src = STATIC_IMAGE_URL;
        });


        // --- L칍GICA DE LA INVITACI칍N ---

        function openInvitation(event) {
            event.preventDefault();

            const nameInput = document.getElementById('guest-name');
            const guestName = nameInput.value.trim();
            if (!guestName) return;

            // Audio
            const audio = document.getElementById('bg-music');
            audio.volume = 0.4;
            audio.play().catch(e => console.log("Audio autoplay restricted", e));
            
            // Bot칩n M칰sica
            const musicBtn = document.getElementById('music-btn');
            musicBtn.classList.remove('hidden');
            musicBtn.classList.add('spin');

            // Interfaz
            const overlay = document.getElementById('gate-overlay');
            const mainContent = document.querySelector('.main-card');
            const greeting = document.getElementById('greeting-text');

            greeting.innerHTML = `춰Hola <strong>${guestName}</strong>!`;

            // === CRITICAL FIX LOGIC ===
            // When we add this class, the CSS rule #gate-overlay.gate-open takes effect
            // setting pointer-events to none.
            overlay.classList.add('gate-open');
            mainContent.classList.add('show-content');

            document.getElementById('static-butterfly').style.display = 'none';
            const spriteEl = document.getElementById('main-butterfly');
            spriteEl.style.display = 'block'; 

            if (mainButterflySprite) {
                mainButterflySprite.startAnimation();
            }

            window.scrollTo({ top: 0, behavior: 'smooth' });
            startAmbientButterflies();
            initScrollReveal();
        }

        function toggleMusic() {
            const audio = document.getElementById('bg-music');
            const btn = document.getElementById('music-btn');
            
            if (audio.paused) {
                audio.play();
                btn.classList.add('spin');
                btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-[#d4af37]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3" /></svg>';
            } else {
                audio.pause();
                btn.classList.remove('spin');
                btn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z" stroke-miterlimit="10"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2" /></svg>';
            }
        }

        function initScrollReveal() {
            const observerOptions = {
                root: null,
                rootMargin: '0px',
                threshold: 0.15 
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    } else {
                        entry.target.classList.remove('is-visible');
                    }
                });
            }, observerOptions);

            const sections = document.querySelectorAll('.reveal-section');
            sections.forEach(section => {
                observer.observe(section);
            });
        }

        function startAmbientButterflies() {
            if (spriteFramesData.length === 0) return;

            const container = document.querySelector('.main-card');
            
            setInterval(() => {
                if (Math.random() > 0.3) { 
                    createButterfly(container);
                }
            }, 800);
        }

        function createButterfly(container) {
            const butterfly = document.createElement('div');
            butterfly.classList.add('ambient-butterfly');
            butterfly.style.display = 'block'; 

            const size = 30 + Math.random() * 30; 
            butterfly.style.width = `${size}px`;
            butterfly.style.height = `${size}px`;

            const startX = Math.random() * container.offsetWidth;
            const startY = Math.random() * (container.offsetHeight * 0.8) + 100;

            butterfly.style.left = `${startX}px`;
            butterfly.style.top = `${startY}px`;
            
            const duration = 3 + Math.random() * 3;
            butterfly.style.animation = `ambientFly ${duration}s ease-out forwards`;

            container.appendChild(butterfly);

            new ButterflySprite(butterfly, true);

            setTimeout(() => {
                butterfly.remove();
            }, duration * 1000);
        }
    </script>
</body>
</html>